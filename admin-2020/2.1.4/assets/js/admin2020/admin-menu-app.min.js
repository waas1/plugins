const a2020menuObj=JSON.parse(a2020_menu_ajax.menu_object),a2020menuPrefs=JSON.parse(a2020_menu_ajax.preferences),a2020menuMaster=JSON.parse(a2020_menu_ajax.masterPrefs),a2020menu={data:()=>({loading:!0,menu:a2020menuObj,search:"",screenWidth:window.innerWidth,menuPrefs:{icons:"true"==a2020menuPrefs.menuIcons,subHover:"true"==a2020menuPrefs.subHover,favourites:a2020menuPrefs.favourites,tempFavourites:[],favsOn:"true"==a2020menuPrefs.favsOn,favsEditingMode:!1,searchBar:"true"==a2020menuPrefs.menuSearch,shrunk:"true"==a2020menuPrefs.menuShrunk,darkMode:"true"==a2020menuPrefs.darkMode,forceDarkMode:"true"==a2020menuPrefs.forcedarkMode,forceLightMode:"true"==a2020menuPrefs.forcelightmode},master:{search:"true"==a2020menuMaster.search,shrunkDefault:"true"==a2020menuMaster.collapseDefault}}),created:function(){window.addEventListener("resize",this.getScreenWidth)},computed:{filteredMenu(){if(searchString=this.search,menu=this.menu,searchedMenu=[],""==searchString){for(i=0;i<menu.length;i++)"sep"!=menu[i].type&&(theclasses=menu[i].classes,theclasses.includes("uk-open")?menu[i].open=!0:menu[i].open=!1);return menu}for(searchString=searchString.toLowerCase(),i=0;i<menu.length;i++){if(tempSub=[],name=menu[i].name,name=name.toLowerCase(),menuObject=menu[i],menuObject.submenu){for(p=0;p<menuObject.submenu.length;p++)name=menuObject.submenu[p].name,name=name.toLowerCase(),name.includes(searchString)&&tempSub.push(menuObject.submenu[p]);tempSub.length>0&&(menuObject.submenu=tempSub,menuObject.open=!0)}name=menu[i].name,name=name.toLowerCase(),(name.includes(searchString)||tempSub.length>0)&&searchedMenu.push(menuObject)}return searchedMenu},favourites(){for(favourites=this.menuPrefs.favourites,menu=this.menu,theFavs=[],thesubs=[],i=0;i<menu.length;i++){if(menu[i].submenu)for(p=0;p<menu[i].submenu.length;p++)favourites.includes(menu[i].submenu[p].id)&&theFavs.push(menu[i].submenu[p]);favourites.includes(menu[i].id)&&theFavs.push(menu[i])}return theFavs}},mounted:function(){window.setInterval(()=>{},500),this.loading=!1},watch:{"menuPrefs.icons":function(e,s){e!=s&&a2020_save_user_prefences("a2020_menu_icons",e,!1)},"menuPrefs.favsOn":function(e,s){e!=s&&a2020_save_user_prefences("a2020_menu_favs_on",e,!1)},"menuPrefs.searchBar":function(e,s){e!=s&&a2020_save_user_prefences("a2020_menu_search",e,!1)},"menuPrefs.subHover":function(e,s){e!=s&&a2020_save_user_prefences("a2020_sub_hover",e,!1)},"menuPrefs.shrunk":function(e,s){e!=s&&a2020_save_user_prefences("a2020_menu_collapse",e,!1)}},methods:{getScreenWidth(){this.screenWidth=window.innerWidth},isSmallScreen(){return this.screenWidth<1e3},isIn:(e,s)=>s.includes(e),addFavourite(e){this.menuPrefs.favourites.push(e.id),this.menuPrefs.tempFavourites.push(e.id)},setFavourites(){this.menuPrefs.favsEditingMode=!0},cancelFavourites(){for(this.menuPrefs.favsEditingMode=!1,addedItems=this.menuPrefs.tempFavourites,savedItems=this.menuPrefs.favourites,actual=[],i=0;i<savedItems.length;i++)addedItems.includes(savedItems[i])||actual.push(savedItems[i]);this.menuPrefs.favourites=actual,this.menuPrefs.tempFavourites=[]},clearFavourites(){this.menuPrefs.favourites=[]},saveFavourites(){this.menuPrefs.favsEditingMode=!1,a2020_save_user_prefences("a2020_menu_favs",this.menuPrefs.favourites,!0)},removeFavourite(e){const s=this.menuPrefs.favourites.indexOf(e.id);s>-1&&this.menuPrefs.favourites.splice(s,1)},switchMenu(){this.menuPrefs.shrunk=!this.menuPrefs.shrunk,this.menuPrefs.shrunk?jQuery("body").addClass("a2020_menu_small"):jQuery("body").removeClass("a2020_menu_small")}}},a2020MenuApp=a2020Vue.createApp(a2020menu);a2020MenuApp.mount("#a2020-menu-app");