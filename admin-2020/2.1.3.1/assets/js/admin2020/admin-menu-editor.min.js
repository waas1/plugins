function open_icon_chooser(e){UIkit.modal(jQuery("#icon-list")).show(),jQuery("#icon_selected").one("click",function(){icon=jQuery("#admin2020_icon_select .icon_selected span").attr("uk-icon"),"noicon"==icon&&(icon=""),jQuery(e).next().attr("uk-icon",icon),jQuery(e).parent().find(".a2020_icon_holder").attr("value",icon),UIkit.modal(jQuery("#icon-list")).hide()})}function a2020_get_users_and_roles(e,t){jQuery.ajax({url:admin2020_admin_menu_editor_ajax.ajax_url,type:"post",data:{action:"a2020_get_users_and_roles_me",security:admin2020_admin_menu_editor_ajax.security,search:e},success:function(e){e&&(data=JSON.parse(e),data&&(t.trigger("tokenize:dropdown:clear"),t.trigger("tokenize:dropdown:show"),t.trigger("tokenize:dropdown:fill",[data])))}})}function a2020_save_menu_editor(){var e={};jQuery(".a2020_menu_item").each(function(t,a){var n=jQuery(a).attr("name");menu_object=e[n]={},e[n].order=jQuery(a).index(),jQuery(a).find(".a2020_top_level_settings .menu_setting").each(function(e,t){setting_name=jQuery(t).attr("name"),value=jQuery(t).val(),menu_object[setting_name]=value}),jQuery(a).find(".a2020_sub_menu_item").length>0&&(submenu_object=menu_object.submenu={},jQuery(a).find(".a2020_sub_menu_item").each(function(e,t){var a=jQuery(t).attr("name");submenu_item=submenu_object[a]={},submenu_item.order=jQuery(t).index(),jQuery(t).find(".menu_setting").each(function(e,t){sub_setting_name=jQuery(t).attr("name"),sub_value=jQuery(t).val(),submenu_item[sub_setting_name]=sub_value})}))}),jQuery.ajax({url:admin2020_admin_menu_editor_ajax.ajax_url,type:"post",dataType:"json",data:{action:"a2020_save_menu_settings",security:admin2020_admin_menu_editor_ajax.security,options:e},success:function(e){e&&(data=e,data.error?UIkit.notification(data.error_message,"danger"):UIkit.notification(data.message,"success"))}})}function a2020_delete_menu_settings(){jQuery.ajax({url:admin2020_admin_menu_editor_ajax.ajax_url,type:"post",data:{action:"a2020_delete_menu_settings",security:admin2020_admin_menu_editor_ajax.security},success:function(e){e&&(data=JSON.parse(e),data.error?UIkit.notification(data.error_message,"danger"):UIkit.notification(data.message,"success"))}})}function a2020_export_menu(){jQuery.ajax({url:admin2020_admin_menu_editor_ajax.ajax_url,type:"post",data:{action:"a2020_export_menu",security:admin2020_admin_menu_editor_ajax.security},success:function(e){data=e;var t=new Date,a=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),i=t.getFullYear();date_today=n+"_"+a+"_"+i,filename="a2020_menu_settings_"+date_today+".json";var o="data:text/json;charset=utf-8,"+encodeURIComponent(data),s=document.getElementById("admin2020_download_settings");s.setAttribute("href",o),s.setAttribute("download",filename),s.click()}})}function a2020_import_menu(){var e=jQuery("#admin2020_export_menu")[0].files[0];if("application/json"==e.type)if(e.size>1e5)window.alert("File is to big.");else{var t=document.getElementById("admin2020_export_menu").files[0],a=new FileReader;a.readAsText(t,"UTF-8"),a.onload=function(e){json_settings=e.target.result,parsed=JSON.parse(json_settings),null!=parsed&&jQuery.ajax({url:admin2020_admin_menu_editor_ajax.ajax_url,type:"post",data:{action:"a2020_import_menu",security:admin2020_admin_menu_editor_ajax.security,settings:parsed},success:function(e){message=e,UIkit.notification(message,"success"),location.reload()}})}}else window.alert("Please select a valid JSON file.")}jQuery(document).ready(function(e){e("#admin2020_icon_select li").on("click",function(){e("#admin2020_icon_select .icon_selected").removeClass("icon_selected"),e(this).addClass("icon_selected")})});